# YANDEX Finally Project

Необходимая версия Golang: 1.22.5 (Если вы не используете Dockerfile, а я уверен что используете!)

Если вам неохота читать всё, что я написал можете сразу перейти к разделу "!!!!Заключение!!!!"

Ссылка для быстрого скачивания:
https://go.dev/dl/go1.22.5.windows-amd64.msi

Кстати если Вы не смогли скачать или установить необходимую версию Golang (что вообще не обязательно с Docker),
в каждой папке ("Server" и "Agent") есть по одному актуальному .exe файлу ("StartServer.exe" и "Agent.exe") для правильного запуска без использования Docker.

Для вопросов по реализации или оформлению, я оставляю вам свою почту: "baharev_da@mail.ru".
Также оставлю Вам свой телеграмм https://t.me/Programer1515
Попрошу писать потому, что с Docker могут быть проблемы или с самим проектом, 
терять баллы из-за непонимания проверяющего как зупустить проект довольно обидно.

                                                                !!!!ВАЖНО!!!!

Все команды для CURL в CMD находятся в папке "CMD" (файл "Commands for cmd client.txt") или в папке "Server" (файл "CommandsList.txt")

Важно учитывать то, что в Агенте не учитывается приоритет операций, также можно отправить одну задачу

                                                            !!!!ЗАМЕТКИ ПО ЗАДАНИЮ!!!!

Заметка будет всего одна, так как на момент написания этого README файла, я больше сложных или спорных моментов не вспомнил.
И эта заметка будет уточнять реализацию раздела про переменные среды из основной задачи проекта.
В условии написано, что переменные нужны, например, для задания количества возможных Gorutine.
У Вас нет задачи перед запуском проекта своими ручками их устанавливать. Все они сами настроятся для корректной работы с помощью
функции EnvironmentVariablesInit из файла Functions.go в папке Агента. Там Вы можете сами поменять их значение.

И дополняя текст выше хочу сказать, что немного не успел дописать клиентскую часть на GRPC

                                                                 !!!!Тесты!!!!
Всё что касается тестирования модулей, то вам следует всего-навсего посмотреть файлы CommandsList.txt, в них все комманды расписаны.
Если вы хоть когда-нибудь писали и запускали тесты (в чём я уверен), то вам даже эти файлы будут не нужны.

Но будьте внимательнее, там есть тесты, которые могут требовать актуальные данные из базы данных или запрашивать у ват JWT токен, от 
того, что вы укажете как нистранно будет зависить результат теста и запустится ли он вообще.

                                                                !!!!ЗАПУСК!!!!

В корне репозитория есть два .bat файла ("Start Agent.bat" и "Start Server.bat") они нужны для запуска Агента и Сервера без Docker,
также во внутренних папках есть ещё два .bat файла для сборки Агента и Сервера ("Build Server.bat" и "Build Agent.bat").
Дальше Вы можете поработать с ними при помощи команд из файла, указанного в разделе "!!!!ВАЖНО!!!!".

                                                    !!!!Заметки по работе Агента!!!!

В случае, если на Сервере нет задач или выражений, то в терминале будет сказано, что случилась ошибка EOF (Не точно).
Это стандартная ситуация, достаточно просто их отправить в запросе, при помощи команды из раздела "!!!!Пример работы!!!!".
Проверить их наличие можно при помощи команды CURL из CMD: 
"curl -X POST --location "localhost:8000/api/v1/expressions" -H "Content-Type: application/json" --data "{\"JWTToken\": \"<JWT token>\" }"",
если же список пустой, то их нет.

                                                            !!!!Пример работы!!!!

НОВОЕ: Запуск сервера из Docker
В папках ("Server" и "Agent") есть по одному Dockerfile файлу, комманды чтобы сбилдить контейнер, создать сеть внутри Docker для работы
сервера и клиента, и собственно запустить контейнер, есть в CommandsList.txt файлах.

В самом начале без разницы где вы в итоге запустите модули, вам необходимо войти в мои админские аккаунты
или зарегистрироваться с помощью комманды:

curl -X POST --location "localhost:8000/api/v1/register" -H "Content-Type: application/json" --data "{\"Login\":\"<User Login>\", \"Password\": \"<User password>\" }"

И для входа вы должны использовать:

curl -X POST --location "localhost:8000/api/v1/login" -H "Content-Type: application/json" --data "{\"Login\":\"<User Login>\", \"Password\": \"<User password>\" }"

Все пароли и логины есть в файле бызы данных.
                                                            !!Общение с сервером!!
Например выполнив команду из CMD:
Мы добавим на сервер новую задачу для работы агента.

curl -X POST --location "localhost:8000/api/v1/expressions" -H "Content-Type: application/json" --data "{\"JWTToken\": \"<JWT token>\" }"

Если вы всё таки запустили не в Docker то вот инструкция по запуску агента. ->

Дальше нужно запустить Agent.

После чего мы уже можем получить результат выражения про запросив его по ID или вывести на экран все задачи.

1) Для конкретного поиска по ID:
curl -X POST --location "localhost:8000/api/v1/expressions/<Expression ID>" -H "Content-Type: application/json" --data "{\"JWTToken\": \"<JWT token>\" }"

2) Для вывода всех выражений:
curl -X POST --location "localhost:8000/api/v1/expressions" -H "Content-Type: application/json" --data "{\"JWTToken\": \"<JWT token>\" }"

                                                            !!!!Заключение!!!!

Понимаю, что название заголовков не очень оригинальное, но мне и Вам должно быть из-за этого намного проще ориентироваться во всём файле. (CTRL + F)

Знаю мой README файл получился довольно большим по объёму, поэтому если у Вас не особого желания всё это читать (что по моему мнению очень важная часть в проверке), 
просто напишите мне на почту или в телегу. Я буду рад ответить на все Ваши вопросы. 

С сочувствием к глазам проверяющего, говорю Вам спасибо за потраченное на прочтение время.

Попрошу писать потому, что с Docker могут быть проблемы или с самим проектом, 
терять баллы из-за непонимания проверяющего как зупустить проект довольно обидно.

Всё также с большим уважением Programmer (или в GitHub DANCHIK121).
